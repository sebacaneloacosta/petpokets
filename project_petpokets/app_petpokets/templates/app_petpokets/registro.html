<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom"> 
        <div class="container-fluid">
          <button type="button" class="btn-light"><a href="index.html"><img src="img/logopetpokets.png" class="logo-custom" alt=""></a></button>
              <div class="dropdown">
                <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Nuestros Productos
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="perros.html">Accesorios para perros</a></li>
                  <li><a class="dropdown-item" href="gatos.html">Accesorios para gatos</a></li>
                  <li><a class="dropdown-item" href="comidaperros.html">Alimento para perros</a></li>
                  <li><a class="dropdown-item" href="comidagatos.html">Alimento para gatos</a></li>
                </ul>
              </div>
              <button type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#exampleModal">
                Envios a domicilio
              </button>
              <nav class="navbar">
                <div class="container-fluid">
                  <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="¿Que buscas?" aria-label="Search" style="width: 400px;">
                    <button class="btn btn-light" type="submit"><img src="img/search.png" alt=""></button>
                  </form>
                </div>
              </nav>
              <div class="dropdown">
                <button type="button" class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                  Iniciar Sesion
                </button>
                <form class="dropdown-menu p-2">
                  <p>¿No tienes cuenta? <a href="registro.html">Registrate aqui</a></p>
                  <div class="mb-3">
                    <label for="exampleDropdownFormEmail2" class="form-label">Correo electronico:</label>
                    <input type="email" class="form-control" id="exampleDropdownFormEmail2">
                  </div>
                  <div class="mb-3">
                    <label for="exampleDropdownFormPassword2" class="form-label">Contraseña:</label>
                    <input type="password" class="form-control" id="exampleDropdownFormPassword2">
                  </div>
                  <button type="submit" class="btn btn-light">Iniciar Sesion</button>
                </form>
              </div>
            <!-- Carrito --> 
            <button class="btn btn-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">Carrito de Compras</button>      
        </div>
    </nav>
    <br><br>
    <h4>REGISTRO</h4>  
    <br>
    <div class="container mt-5 form-custom">
      <form id="miFormulario" novalidate>
          <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" name="nombre" required>
              <div class="error" id="errorNombre"></div>
          </div>
          <div class="mb-3">
              <label for="apellido" class="form-label">Apellido</label>
              <input type="text" class="form-control" id="apellido" name="apellido" required>
              <div class="error" id="errorApellido"></div>
          </div>
          <div class="mb-3">
              <label for="email" class="form-label">Correo Electrónico</label>
              <input type="email" class="form-control" id="email" name="email" required>
              <div class="error" id="errorEmail"></div>
          </div>
          <div class="mb-3">
              <label for="password" class="form-label">Contraseña</label>
              <input type="password" class="form-control" id="password" name="password" required>
              <div class="error" id="errorPassword"></div>
          </div>
          <div class="mb-3">
              <label for="telefono" class="form-label">Número de Teléfono</label>
              <input type="text" class="form-control" id="telefono" name="telefono" required>
              <div class="error" id="errorTelefono"></div>
          </div>
          <br>
          <button type="submit" class="btn btn-light custom-submit">Registrarme</button>
      </form>
  </div>

      <!-- Contenido de la ventana del carrito -->      
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasRightLabel">Carrito de compra</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul id="cartItems" class="list-group mb-3"></ul>
          <h6>Total: $<span id="totalAmount">0</span></h6>
        </div>
      </div>
    


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    
    <!-- Validaciones de formulario incluyendo Jquery -->
    <script>
      $(document).ready(function() {
          $("#miFormulario").submit(function(event) {
              event.preventDefault();
              
              // Limpia mensajes de error anteriores
              $(".error").text("");
              $(".is-invalid").removeClass("is-invalid");

              let nombre = $("#nombre").val().trim();
              let apellido = $("#apellido").val().trim();
              let email = $("#email").val().trim();
              let password = $("#password").val().trim();
              let telefono = $("#telefono").val().trim();
              let isValid = true;

              // Validacion del nombre
              if (nombre === "") {
                  $("#errorNombre").text("El nombre es obligatorio.");
                  $("#nombre").addClass("is-invalid");
                  isValid = false;
              }

              // Validacion del apellido
              if (apellido === "") {
                  $("#errorApellido").text("El apellido es obligatorio.");
                  $("#apellido").addClass("is-invalid");
                  isValid = false;
              }

              // Validacion del correo electronico
              if (email === "") {
                  $("#errorEmail").text("El correo electronico es obligatorio.");
                  $("#email").addClass("is-invalid");
                  isValid = false;
              } else if (!validateEmail(email)) {
                  $("#errorEmail").text("La direccion de correo electronico es invalida.");
                  $("#email").addClass("is-invalid");
                  isValid = false;
              }

              // Validacion de la contraseña
              if (password.length < 8) {
                  $("#errorPassword").text("La contraseña debe tener al menos 8 caracteres.");
                  $("#password").addClass("is-invalid");
                  isValid = false;
              } else if (!validatePassword(password)) {
                  $("#errorPassword").text("La contraseña debe contener letras y números.");
                  $("#password").addClass("is-invalid");
                  isValid = false;
              }

              // Validacion del telefono
              if (telefono === "") {
                  $("#errorTelefono").text("El número de telefono es obligatorio.");
                  $("#telefono").addClass("is-invalid");
                  isValid = false;
              }

              // Envio de formulario si cumple con las validaciones
              if (isValid) {
                  alert("Te has registrado correctamente!");
                  $(this).unbind('submit').submit(); // Envio de formulario
              }
          });

          // Validar el formato del correo electronico
          function validateEmail(email) {
              var re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              return re.test(email);
          }

          // Validar la contraseña (minimo 8 caracteres, debe contener letras y numeros)
          function validatePassword(password) {
              var re = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
              return re.test(password);
          }
      });
  </script>
<script src="carrito.js"></script>

  </body>
</html>